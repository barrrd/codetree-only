# [삼성 기출] 꼬리잡기놀이

> **문제 링크**: [코드트리 - 꼬리잡기놀이](https://www.codetree.ai/ko/frequent-problems/samsung-sw/problems/tail-catch-play/description)

---

## ⚠️ 구현하면서 헷갈렸던 핵심 포인트

### 1) 매 라운드 hit 판정은 `list in`으로 하면 사실상 메모리/시간이 터진다
공의 이동 경로(최대 n칸)마다 모든 팀을 순회하며  
`(r,c) in team_members[t]` 같이 **리스트 포함 검사**를 쓰면, 내부적으로 팀 길이만큼 선형 탐색(O(L))이 발생한다.  
라운드(k)가 크면 `k × n × m × L` 형태로 연산이 폭증해 **시간 초과처럼 보이지만 결국 메모리도 같이 올라가 터질 수 있음**.

➡️ 해결: 팀 좌표는 `team_members`(순서용 리스트)와 함께 `team_sets`(포함 검사 O(1) set)를 병행하고,  
팀이 이동하거나 뒤집힐 때 `team_sets[t]`도 반드시 갱신한다.

### 2) 전처리에서 좌표 리스트를 여러 번 저장하면 튜플 객체가 쌓여 메모리가 커진다
컴포넌트 좌표(`paths`)를 따로 저장하고, 다시 순서 경로(`path_lists`)까지 별도로 만들면  
같은 좌표를 여러 리스트에 중복 보관하게 되어 파이썬에선 메모리 부담이 커진다.

➡️ 해결: BFS로 컴포넌트(path)를 얻자마자 순서 경로를 만들고, 불필요한 리스트(`paths`)는 저장하지 않는다.
